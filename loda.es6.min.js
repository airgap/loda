(()=>{var e,t={x:0,y:0},r={x:0,y:0},o=Math,a=o.pow,n=document,d=e=>o.min(200,o.max(-200,e)),i=(e,t,r)=>e.dispatchEvent(new CustomEvent(t,{detail:r})),s=()=>{var o={x:d(4*(r.x-t.x)),y:d(4*(r.y-t.y))},s={x:r.x+o.x,y:r.y+o.y,d:a(a(o.x,2)+a(o.y,2),.5)};i(n,"precursormove",{x:s.x,y:s.y,d:s.d}),(t=>{var r=n.elementFromPoint(t.x,t.y),o=[],a=[],d=e;if(!e||r&&r===e||(e.classList.remove("prehover"),i(e,"erphover")),r&&e!==r){for(;d;)a.push(d=d.parentNode);for(d=r;d;)o.push(d=d.parentNode);for(var s=0,l=a;s<l.length;s++)(d=l[s])&&o.indexOf(d)<0&&d.classList.remove("prehover");for(var c=0,p=o;c<p.length;c++)(d=p[c])&&d.classList&&a.indexOf(d)<0&&d.classList.add("prehover");r.classList.add("prehover"),i(r,"prehover",{d:t.d}),e=r}})(s),t=r};n.addEventListener("mousemove",e=>{r={x:e.clientX,y:e.clientY},s()})})(),location.href.match(/(^|\?|&)loda-disabled(=(true|1))?($|&)/)?console.log("[Loda] Loda disabled by UR"):void 0===window.Loda&&(()=>{window.Loda=!0;var e,t,r,o,a,n,d,i,s=(e,t)=>{document.dispatchEvent(new CustomEvent(e,{detail:t}))},l=!1,c={},p={},h=[],v="https://api.loda.rocks",g=!1,u=e=>"string"==typeof e?document.getElementById(e):e,f=(e,t,r)=>e.addEventListener(t,r),m=()=>{i&&(clearTimeout(i),i=null),s("page-loading",{cache:c}),t&&clearTimeout(t),t=setTimeout(y,10)},y=()=>{if(document.body){l&&(s("page-loaded"),[document,window].forEach(e=>{e.dispatchEvent(new UIEvent("load"))})),a=location.href;var e=document.getElementsByTagName("a"),t=document.createElement("a"),r=location.hostname,d=location.href.indexOf("#");-1==d&&(d=location.href.length);for(var i=o=>{var a=e[o].href,i=a.indexOf("#");-1==i&&(i=a.length),e[o].href&&!e[o].getAttribute("loda-disabled")&&e[o].href.match(/^https?:\/\//)&&!e[o].getAttribute("target")&&(location.href.match(/^(.+?):\/\//)||[0])[1]==(a.match(/^(.+?):\/\//)||[0])[1]&&e[o].href.match(RegExp("^https?://"+r+"([:/#]|$)"))&&(a.substring(0,i)!=location.href.substring(0,d)?(e[o].addEventListener("prehover",()=>{E({target:e[o]})}),e[o].addEventListener("mousedown",L),t.href=e[o].getAttribute("href"),e[o].setAttribute("loda-href","true")):e[o].addEventListener("click",n))},c=0;c<e.length;c++)i(c);var p,f=u("loda-script");if(f){p=f.getAttribute("loda-id"),o=p;var y=f.getAttribute("loda-proxy");v=y||"https://api.loda.rocks",g=!!y}("string"==typeof o||g)&&h.indexOf(location.href)<0&&(w(location.href,null),h.push(location.href)),s("page-prepped"),l=!0}else m()};(e=>f(window,"DOMContentLoaded",e))(m);var w=(e,t)=>{var r=new XMLHttpRequest;r.addEventListener("load",()=>{var e=JSON.parse(r.response),t=e.pages;if(t)for(var o=0,a=t;o<a.length;o++){var n=a[o];b(n)}else s("api-error",{error:e.err})});var a=document.createElement("a");a.href=e;var n={action:"loading_page",current_page:a.href,api_key:o};t&&(a.href=t,n.last_page=a.href),r.open("POST",v),r.send(JSON.stringify(n))},L=e=>{var t;if("string"==typeof e)t=e;else{if(t=e.target,e.button)return;for(0===e.button&&e.preventDefault(),i||(i=setTimeout(()=>{var e=document.body;e.style.cursor="none",e.style.pointerEvents="none",e.style.opacity=".5"},500));t&&!t.href;)t=t.parentNode;t=t.href}var r=a;x(t),"string"==typeof o&&w(t,r)},x=(e,t)=>{a=e,c[e]?setTimeout(()=>{S(e,t)},0):b(e,!0,t)};var E=e=>{for(var t=e.target;t&&"function"==typeof t.getAttribute&&!t.href;)t=t.parentNode;t&&"function"==typeof t.getAttribute&&(t=t.href,r&&clearTimeout(r),r=setTimeout(()=>{b(t)},0))},b=(e,t,r)=>{if(t&&(d=e,s("page-queued",{page:e})),!p[e]){p[e]=!0;var o=N(e);if(O()>-1&&o&&o.version>=O())c[e]=o.content,s("permacache-hit",{page:e}),d&&S(e,r);else{var a=new XMLHttpRequest;a.addEventListener("load",()=>{c[e]=a.response,s("page-cached",{page:e,content:a.content}),A(a.response.length),O()>-1&&T()+a.response.length<4e6&&(localStorage.setItem(e,JSON.stringify({content:a.response,version:O(),date:+new Date,last_used:+new Date,owner:"Loda"})),s("page-permacached")),d&&S(d,r)}),a.open("GET",e),a.send()}}},S=(e,t)=>{var r;e?(r=c[e],window.document.open(),window.document.write(r),window.document.close(),t||history.pushState({page:e},null,e),setTimeout(()=>{m()},0)):b("index.html",!0,!0)};n=()=>{e=!0};var O=()=>{var e=u("loda-script");return e&&e.getAttribute("site-version")||-1},N=e=>{var t=localStorage.getItem(e);return t?JSON.parse(t):0},T=()=>{for(var e=0,t=0,r=localStorage.length;t<r;++t){var o=localStorage.key(t),a=localStorage.getItem(o),n=void 0;try{n=JSON.parse(a)}catch(e){continue}"Loda"==n.owner&&(e+=n.content.length)}return e},A=e=>{for(var t=T();t+e>4e6&&t>0;){t=0;for(var r=+new Date,o=void 0,a=0,n=localStorage.length;a<n;++a){var d=localStorage.key(a),i=localStorage.getItem(d),l=void 0;try{l=JSON.parse(i)}catch(e){continue}"Loda"==l.owner&&(t+=l.content.length,l.last_used<r&&(r=l.last_used,o=d))}o&&(localStorage.removeItem(o),s("pageCache-trimmed",{page:o}))}s("pageCache-cleaned")};f(window,"DOMContentLoaded",()=>{!0}),window.addEventListener("popstate",t=>{null===t.state&&e?e=!1:location.reload()})})();
//# sourceMappingURL=loda.es6.min.js
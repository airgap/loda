var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set){throw new TypeError("ES3 does not support getters and setters.")}a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return "undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d+=1){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.from",function(a){return a?a:function(a,c,d){$jscomp.initSymbolIterator();c=null!=c?c:function(a){return a};var b=[],f=a[Symbol.iterator];if("function"==typeof f){for(a=f.call(a);!(f=a.next()).done;){b.push(c.call(d,f.value))}}else{for(var f=a.length,g=0;g<f;g+=1){b.push(c.call(d,a[g]))}}return b}},"es6-impl","es3");$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");var $jscomp$this=this;if(location.href.match(/(^|\?|&)loda-disabled(=(true|1))?($|&)/)){console.log("[Loda] Loda disabled by URL.")}else if("undefined"==typeof Loda){var makeDeferredPageLoadSpooler=function(){Loda.deferredPageLoadSpooler||(Loda.deferredPageLoadSpooler=setTimeout(function(){var a=document.body;a.style.cursor="none";a.style.pointerEvents="none";a.style.opacity=.5},500))};Loda={};window.addEventListener("popstate",Loda.popPage);Loda.VERSION=.5;Loda.VERSION_STRING="0.5";Loda.tryingToBinder;Loda.loaded=!1;Loda.positions=[];Loda.lastPos={x:0,y:0};Loda.logbox;Loda.frame=0;Loda.cpos={x:0,y:0};Loda.cache={};Loda.caching={};Loda.loadedFor=[];Loda.cacheTimer;Loda.TACHYON_ID;Loda.siteVersion;Loda.LAST_PAGE;Loda.ignoreNav;Loda.queuedPage;Loda.SERVER="https://api.loda.rocks";Loda.USING_PROXY=!1;Loda.grab=function(a){if("string"===typeof a){var b=[];a.split("|").forEach(function(a){return b.push(document.getElementById(a))});return 1==b.length?b[0]:b}return a};Loda.bind=function(a,b,c){Loda.enumerateOver(Loda.expandSpaces(a),function(a){Loda.enumerateOver(Loda.expandSpaces(b),function(b){Loda.enumerateOver(c,function(c){var d=Loda.grab(a);d?b?c?d.addEventListener(b,c):console.log("Trying to bind a nonexistent function to a node"):console.log("Trying to bind a function to a node with an invalid trigger"):console.log("Trying to bind a function to nonexistant node")})})})};Loda.load=function(a){Loda.enumerateOver(a,function(a){Loda.bind(window,"load",a)})};Loda.doad=function(a){Loda.enumerateOver(a,function(a){Loda.bind(window,"DOMContentLoaded",a)})};Loda.dfload=function(a){Loda.enumerateOver(a,function(a){Loda.bind(window,"load",function(){setTimeout(a,0)})})};Loda.enumerateOver=function(a,b){if(Array.isArray(a)){for(var c=$jscomp.makeIterator(Array.from(a)),d=c.next();!d.done;d=c.next()){b(d.value)}}else{b(a)}};Loda.expandSpaces=function(a){return "string"==typeof a?a.split(" "):a};Loda.addc=function(a,b){Loda.enumerateOver(Loda.grab(a),function(a){a.classList.add(b)})};Loda.remc=function(a,b){Loda.enumerateOver(Loda.grab(a),function(a){a.classList.remove(b)})};Loda.setc=function(a,b,c){Loda[c?"addc":"remc"](a,b)};Loda.hasc=function(a,b){return Loda.grab(a).classList.contains(b)};Loda.togc=function(a,b){Loda.enumerateOver(Loda.grab(a),function(a){Loda.hasc(a,b)?Loda.remc(a,b):Loda.addc(a,b)})};Loda.isDebugging=function(){var a=Loda.grab("loda-script");return a&&"true"==a.getAttribute("loda-debugging")};Loda.loader=function(){"undefined"!=typeof Loda.deferredPageLoadSpooler&&clearTimeout(Loda.deferredPageLoadSpooler);Loda.TryingToBinder&&clearTimeout(Loda.tryingToBinder);Loda.tryingToBinder=setTimeout(Loda.actualLoader,10)};Loda.actualLoader=function(){if(document.body){Loda.loaded&&(Loda.isDebugging()&&console.log("[Loda] Page loaded"),[document,window].forEach(function(a){a.dispatchEvent(new UIEvent("load"))}));var a=!1;if("undefined"!=typeof LODA_EXCLUSION_URLS&&Array.isArray(LODA_EXCLUSION_URLS)){for(var b in LODA_EXCLUSION_URLS){if(LODA_EXCLUSION_URLS[b]==location.href){console.log("Loda excluded from this page.");a=!0;break}}}Loda.LAST_PAGE=location.href;if(!a){b=document.getElementsByTagName("a");var c=document.createElement("a"),d=location.hostname,e=location.href.indexOf("#");-1==e&&(e=location.href.length);for(a=0;a<b.length;a+=1){var f=b[a].href,g=f.indexOf("#");-1==g&&(g=f.length);b[a].href&&!b[a].getAttribute("loda-disabled")&&b[a].href.match(/^https?:\/\//)&&!b[a].getAttribute("target")&&(location.href.match(/^(.+?):\/\//)||[0])[1]==(f.match(/^(.+?):\/\//)||[0])[1]&&b[a].href.match(new RegExp("^https?://"+d+"([:/#]|$)"))&&(f.substring(0,g)!=location.href.substring(0,e)?(b[a].addEventListener("mouseover",Loda.startHover),b[a].addEventListener("blur",Loda.endHover),b[a].addEventListener("mousedown",Loda.clickLink),c.href=b[a].getAttribute("href"),b[a].setAttribute("loda-href",c.href),b[a].setAttribute("href","javascript:void(0);")):b[a].addEventListener("click",Loda.ignoreNav))}}document.body.addEventListener("mousemove",Loda.moved);if(a=Loda.grab("loda-script")){b=a.getAttribute("loda-id"),Loda.TACHYON_ID=b,Loda.isDebugging()&&console.log("[Loda] Site version: "+Loda.getSiteVersion()),a=a.getAttribute("loda-proxy"),Loda.SERVER=a||"https://api.loda.rocks",Loda.USING_PROXY=a}"string"==typeof Loda.TACHYON_ID||Loda.USING_PROXY?0>Loda.loadedFor.indexOf(location.href)&&(Loda.pollServer(location.href,null),Loda.loadedFor.push(location.href)):Loda.isDebugging()&&console.log("[Loda] No Loda ID present. This is A-OK unless you need RML.");Object.keys(localStorage);if(Loda.isDebugging()){for(a=0,b=localStorage.length;a<b;a+=1){console.log(localStorage.key(a))}}Loda.isDebugging()&&console.log("[Loda] Page prepped");document.dispatchEvent(new CustomEvent("page-prepped",{bubbles:!0,cancelable:!0}));Loda.loaded=!0}else{Loda.loader()}};Loda.load(Loda.loader);Loda.pollServer=function(a,b){var c=new XMLHttpRequest;c.addEventListener("load",function(){var a=JSON.parse(c.response),b=a.pages;if(b){for(a=$jscomp.makeIterator(Array.from(b)),b=a.next();!b.done;b=a.next()){url=b.value,Loda.cachePage(url)}}else{Loda.isDebugging()&&console.log(a.err.description)}});var d=document.createElement("a");d.href=a;var e={action:"loading_page",current_page:d.href,api_key:Loda.TACHYON_ID};b&&(d.href=b,e.last_page=d.href);c.open("POST",Loda.SERVER);c.send(JSON.stringify(e))};Loda.clickLink=function(a){if("string"!=typeof a){makeDeferredPageLoadSpooler();for(a=a.target;a&&!a.getAttribute("loda-href");){a=a.parentNode}a=a.getAttribute("loda-href")}var b=Loda.LAST_PAGE;Loda.loadPage(a);"string"==typeof Loda.TACHYON_ID&&Loda.pollServer(a,b)};Loda.loadPage=function(a,b){Loda.LAST_PAGE=a;Loda.cache[a]?setTimeout(function(){Loda.showPage(a,b)},0):Loda.cachePage(a,!0,b)};Loda.startHover=function(a){for(var b=a.target;b&&"function"==typeof b.getAttribute&&!b.getAttribute("loda-href");){b=b.parentNode}b&&"function"==typeof b.getAttribute&&(b=b.getAttribute("loda-href"),Loda.cacheTimer&&clearTimeout(Loda.cacheTimer),Loda.cacheTimer=setTimeout(function(){Loda.cachePage(b)},0))};Loda.endHover=function(a){Loda.cacheTimer&&clearTimeout(Loda.cacheTimer)};Loda.cachePage=function(a,b,c){b&&(Loda.queuedPage=a,Loda.isDebugging()&&console.log("[Loda] Queued page for display",a),document.dispatchEvent(new CustomEvent("queued-page",{bubbles:!0,cancelable:!0,detail:{page:a}})));if(!Loda.caching[a]){if(Loda.caching[a]=!0,b=Loda.storedPageFor(a),-1<Loda.getSiteVersion()&&b&&b.version>=Loda.getSiteVersion()){Loda.cache[a]=b.content,document.dispatchEvent(new CustomEvent("permacache-hit",{bubbles:!0,cancelable:!0})),Loda.isDebugging()&&console.log("[Loda] Loaded page from permacache.    "+a),Loda.queuedPage&&Loda.showPage(a,c)}else{var d=new XMLHttpRequest;d.addEventListener("load",function(){Loda.cache[a]=d.response;Loda.isDebugging()&&console.log("[Loda] Cached page",a);document.dispatchEvent(new CustomEvent("page-cached",{bubbles:!0,cancelable:!0,detail:{page:a,content:d.content}}));Loda.cleanCache(d.response.length);-1<Loda.getSiteVersion()&&4E6>Loda.cacheSize()+d.response.length&&(localStorage.setItem(a,JSON.stringify({content:d.response,version:Loda.getSiteVersion(),date:+new Date,last_used:+new Date,owner:"Loda"})),Loda.isDebugging()&&console.log("[Loda] Saved page to permacache."),document.dispatchEvent(new CustomEvent("page-permacached",{bubbles:!0,cancelable:!0})));Loda.isDebugging()&&console.log("[Loda] Saved page to permacache.");Loda.queuedPage&&Loda.showPage(Loda.queuedPage,c)});d.open("GET",a);d.send()}}};Loda.showPage=function(a,b){var c;a?(c=Loda.cache[a],window.document.open(),window.document.write(c),window.document.close(),b||history.pushState({page:a},null,a),setTimeout(function(){Loda.loader()},0)):cachePage("index.html",!0,!0)};var foreseen;Loda.moved=function(a){a={x:a.clientX,y:a.clientY,f:Loda.frame++};Loda.cpos=a;Loda.pollCursor()};Loda.pollCursor=function(){var a=Loda.lastPos||{x:0,y:0},b=Loda.cpos||{x:0,y:0};Loda.predictedCpos=Loda.sum(Loda.cpos,{x:8*(b.x-a.x),y:8*(b.y-a.y)});Loda.hoverElement(Loda.predictedCpos);Loda.lastPos=Loda.cpos};Loda.hoverElement=function(a){a=document.elementFromPoint(~~a.x,~~a.y);!foreseen||a&&a==foreseen||(Loda.remc(foreseen,"prehover"),foreseen.dispatchEvent(new CustomEvent("erphover",{bubbles:!0,cancelable:!0})));if(a&&foreseen!=a){for(var b=[],c=foreseen;c;){c=c.parentNode,b.push(c)}for(var d=[],c=a;c;){c=c.parentNode,d.push(c)}for(var e=$jscomp.makeIterator(Array.from(b)),c=e.next();!c.done;c=e.next()){(c=c.value)&&c.classList&&0>d.indexOf(c)&&Loda.remc(c,"prehover")}d=$jscomp.makeIterator(Array.from(d));for(c=d.next();!c.done;c=d.next()){(c=c.value)&&c.classList&&0>b.indexOf(c)&&Loda.addc(c,"prehover")}Loda.addc(a,"prehover");a.dispatchEvent(new CustomEvent("prehover",{bubbles:!0,cancelable:!0}));foreseen=a}a&&Loda.startHover({target:a})};Loda.popPage=function(a){null===event.state&&Loda.changingHash?Loda.changingHash=!1:location.reload()};Loda.ignoreNav=function(a){Loda.changingHash=!0};Loda.sum=function(a,b){return{x:a.x+b.x,y:a.y+b.y}};Loda.log=function(a){Loda.logbox||(Loda.logbox=Loda.grab("log"));Loda.logbox&&(Loda.logbox.innerHTML="object"===typeof a?JSON.stringify(a):a)};Loda.getSiteVersion=function(){var a=Loda.grab("loda-script");return a?a.getAttribute("site-version")||-1:-1};Loda.storedPageFor=function(a){a=localStorage.getItem(a);try{a=JSON.parse(a)}catch(b){}return a||0};Loda.pollCursor();Loda.cacheSize=function(){for(var a=0,b=0,c=localStorage.length;b<c;b+=1){var d=localStorage.key(b),d=localStorage.getItem(d),e;try{e=JSON.parse(d)}catch(f){continue}"Loda"==e.owner&&(a+=e.content.length)}return a};Loda.cleanCache=function(a){for(var b=Loda.cacheSize();4E6<b+a&&0<b;){for(var b=0,c=+new Date,d,e=0,f=localStorage.length;e<f;e+=1){var g=localStorage.key(e),k=localStorage.getItem(g),h;try{h=JSON.parse(k)}catch(l){continue}"Loda"==h.owner&&(b+=h.content.length,h.last_used<c&&(c=h.last_used,d=g))}d&&(localStorage.removeItem(d),Loda.isDebugging()&&console.log("[Loda] Removed oldest page from cache.",d))}document.dispatchEvent(new CustomEvent("cache-cleaned",{bubbles:!0,cancelable:!0}))};Loda.fload=function(a,b,c,d){function e(a){a&&(l=a);f+=1;l&&(m||Loda.domLoaded)&&k&&k(l)}var f=0,g={},k,h,l,m;"object"==typeof b&&(b=JSON.stringify(b));d&&(g=d);"string"==typeof b&&(g.method="POST",g.body=b);$jscomp$this.then=function(a){k=a;return this};$jscomp$this.fail=function(a){h=a;return this};fetch(a,g).then(function(a){if(a.ok){(c?a.json():a.text()).then(function(a){e(a)})["catch"](function(a){if(h){h(a)}else{throw Error(a)}})}else if(fail){fail("Error fetching request.")}else{throw Error("Error fetching request.")}})["catch"](function(a){if(h){h(a)}else{throw Error(a)}});Loda.bind(window,"DOMContentLoaded",function(a){m=!0;e()});return $jscomp$this};Loda.bind(window,"DOMContentLoaded",function(a){Loda.domLoaded=!0})};

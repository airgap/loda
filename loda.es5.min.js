!function(){var e,t={x:0,y:0},n={x:0,y:0},o=Math,r=o.pow,a=document,i=function(e){return o.min(200,o.max(-200,e))},c=function(e,t,n){return e.dispatchEvent(new CustomEvent(t,{detail:n}))},d=function(){var o={x:i(4*(n.x-t.x)),y:i(4*(n.y-t.y))},d={x:n.x+o.x,y:n.y+o.y,d:r(r(o.x,2)+r(o.y,2),.5)};c(a,"precursormove",{x:d.x,y:d.y,d:d.d}),function(t){var n=a.elementFromPoint(t.x,t.y),o=[],r=[],i=e;if(!e||n&&n===e||(e.classList.remove("prehover"),c(e,"erphover")),n&&e!==n){for(;i;)r.push(i=i.parentNode);for(i=n;i;)o.push(i=i.parentNode);for(var d=0,s=r;d<s.length;d++)(i=s[d])&&o.indexOf(i)<0&&i.classList.remove("prehover");for(var u=0,l=o;u<l.length;u++)(i=l[u])&&i.classList&&r.indexOf(i)<0&&i.classList.add("prehover");n.classList.add("prehover"),c(n,"prehover",{d:t.d}),e=n}}(d),t=n};a.addEventListener("mousemove",function(e){n={x:e.clientX,y:e.clientY},d()})}(),location.href.match(/(^|\?|&)loda-disabled(=(true|1))?($|&)/)?console.log("[Loda] Loda disabled by UR"):void 0===window.Loda&&function(){window.Loda=!0;var e,t,n,o,r,a,i,c,d=function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},s=!1,u={},l={},f=[],p="https://api.loda.rocks",h=!1,v=function(e){return"string"==typeof e?document.getElementById(e):e},g=function(e,t,n){return e.addEventListener(t,n)},m=function(){c&&(clearTimeout(c),c=null),d("page-loading",{cache:u}),t&&clearTimeout(t),t=setTimeout(y,10)},y=function(){if(document.body){s&&(d("page-loaded"),[document,window].forEach(function(e){e.dispatchEvent(new UIEvent("load"))})),r=location.href;var e=document.getElementsByTagName("a"),t=document.createElement("a"),n=location.hostname,i=location.href.indexOf("#");-1==i&&(i=location.href.length);for(var c=function(o){var r=e[o].href,c=r.indexOf("#");-1==c&&(c=r.length),e[o].href&&!e[o].getAttribute("loda-disabled")&&e[o].href.match(/^https?:\/\//)&&!e[o].getAttribute("target")&&(location.href.match(/^(.+?):\/\//)||[0])[1]==(r.match(/^(.+?):\/\//)||[0])[1]&&e[o].href.match(RegExp("^https?://"+n+"([:/#]|$)"))&&(r.substring(0,c)!=location.href.substring(0,i)?(e[o].addEventListener("prehover",function(){E({target:e[o]})}),e[o].addEventListener("mousedown",L),t.href=e[o].getAttribute("href"),e[o].setAttribute("loda-href","true")):e[o].addEventListener("click",a))},u=0;u<e.length;u++)c(u);var l,g=v("loda-script");if(g){l=g.getAttribute("loda-id"),o=l;var y=g.getAttribute("loda-proxy");p=y||"https://api.loda.rocks",h=!!y}("string"==typeof o||h)&&f.indexOf(location.href)<0&&(w(location.href,null),f.push(location.href)),d("page-prepped"),s=!0}else m()};g(window,"DOMContentLoaded",m);var w=function(e,t){var n=new XMLHttpRequest;n.addEventListener("load",function(){var e=JSON.parse(n.response),t=e.pages;if(t)for(var o=0,r=t;o<r.length;o++){var a=r[o];b(a)}else d("api-error",{error:e.err})});var r=document.createElement("a");r.href=e;var a={action:"loading_page",current_page:r.href,api_key:o};t&&(r.href=t,a.last_page=r.href),n.open("POST",p),n.send(JSON.stringify(a))},L=function(e){var t;if("string"==typeof e)t=e;else{if(t=e.target,e.button)return;for(0===e.button&&e.preventDefault(),c||(c=setTimeout(function(){var e=document.body;e.style.cursor="none",e.style.pointerEvents="none",e.style.opacity=".5"},500));t&&!t.href;)t=t.parentNode;t=t.href}var n=r;x(t),"string"==typeof o&&w(t,n)},x=function(e,t){r=e,u[e]?setTimeout(function(){S(e,t)},0):b(e,!0,t)};var E=function(e){for(var t=e.target;t&&"function"==typeof t.getAttribute&&!t.href;)t=t.parentNode;t&&"function"==typeof t.getAttribute&&(t=t.href,n&&clearTimeout(n),n=setTimeout(function(){b(t)},0))},b=function(e,t,n){if(t&&(i=e,d("page-queued",{page:e})),!l[e]){l[e]=!0;var o=N(e);if(O()>-1&&o&&o.version>=O())u[e]=o.content,d("permacache-hit",{page:e}),i&&S(e,n);else{var r=new XMLHttpRequest;r.addEventListener("load",function(){u[e]=r.response,d("page-cached",{page:e,content:r.content}),A(r.response.length),O()>-1&&T()+r.response.length<4e6&&(localStorage.setItem(e,JSON.stringify({content:r.response,version:O(),date:+new Date,last_used:+new Date,owner:"Loda"})),d("page-permacached")),i&&S(i,n)}),r.open("GET",e),r.send()}}},S=function(e,t){var n;e?(n=u[e],window.document.open(),window.document.write(n),window.document.close(),t||history.pushState({page:e},null,e),setTimeout(function(){m()},0)):b("index.html",!0,!0)};a=function(){e=!0};var O=function(){var e=v("loda-script");return e&&e.getAttribute("site-version")||-1},N=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):0},T=function(){for(var e=0,t=0,n=localStorage.length;t<n;++t){var o=localStorage.key(t),r=localStorage.getItem(o),a=void 0;try{a=JSON.parse(r)}catch(e){continue}"Loda"==a.owner&&(e+=a.content.length)}return e},A=function(e){for(var t=T();t+e>4e6&&t>0;){t=0;for(var n=+new Date,o=void 0,r=0,a=localStorage.length;r<a;++r){var i=localStorage.key(r),c=localStorage.getItem(i),s=void 0;try{s=JSON.parse(c)}catch(e){continue}"Loda"==s.owner&&(t+=s.content.length,s.last_used<n&&(n=s.last_used,o=i))}o&&(localStorage.removeItem(o),d("pageCache-trimmed",{page:o}))}d("pageCache-cleaned")};g(window,"DOMContentLoaded",function(){!0}),window.addEventListener("popstate",function(t){null===t.state&&e?e=!1:location.reload()})}();
//# sourceMappingURL=loda.es5.min.js